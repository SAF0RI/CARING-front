import React from 'react';
import { View, ViewStyle } from 'react-native';
import Svg, { Defs, Mask, Path } from 'react-native-svg';

interface SpeechBubbleProps {
    children: React.ReactNode;
    className?: string;
    style?: ViewStyle;
}

export function SpeechBubble({ children, className = '', style }: SpeechBubbleProps) {
    return (
        <View className={`relative ${className}`} style={style}>
            {/* SVG 배경 */}
            <View className="absolute top-0 left-0 right-0" style={{ height: 78 }}>
                <Svg width="100%" height={78} viewBox="0 0 219 78" preserveAspectRatio="none">
                    <Defs>
                        <Mask id="speech-bubble-mask">
                            <Path
                                d="M145.019 0.976562C145.008 0.135468 145.97 -0.316802 146.586 0.255859C151.46 4.78743 153.667 9.8778 154.668 13.999H187C204.673 13.999 219 28.3261 219 45.999C219 63.6721 204.673 77.999 187 77.999H32C14.3269 77.999 0 63.6721 0 45.999C0.000219059 28.3261 14.327 13.999 32 13.999H143.908C145.13 9.88344 145.069 4.96839 145.019 1.00488V0.976562Z"
                                fill="white"
                            />
                        </Mask>
                    </Defs>
                    <Path
                        d="M145.019 0.976562C145.008 0.135468 145.97 -0.316802 146.586 0.255859C151.46 4.78743 153.667 9.8778 154.668 13.999H187C204.673 13.999 219 28.3261 219 45.999C219 63.6721 204.673 77.999 187 77.999H32C14.3269 77.999 0 63.6721 0 45.999C0.000219059 28.3261 14.327 13.999 32 13.999H143.908C145.13 9.88344 145.069 4.96839 145.019 1.00488V0.976562Z"
                        fill="white"
                    />
                    <Path
                        d="M145.019 0.976562H146.019L146.018 0.963822L145.019 0.976562ZM146.586 0.255859L147.267 -0.47652L147.267 -0.476586L146.586 0.255859ZM154.668 13.999L153.696 14.2351L153.882 14.999H154.668V13.999ZM219 45.999H220V45.999L219 45.999ZM0 45.999L-1 45.999V45.999H0ZM143.908 13.999V14.999H144.654L144.867 14.2837L143.908 13.999ZM145.019 1.00488H144.018L144.019 1.01762L145.019 1.00488ZM145.019 0.976562L146.018 0.963822C146.018 0.955281 146.019 0.954029 146.018 0.957959C146.017 0.961678 146.015 0.966878 146.012 0.972341C146.005 0.982692 145.997 0.989261 145.988 0.993252C145.979 0.997321 145.963 1.002 145.94 0.998743C145.928 0.997097 145.918 0.993747 145.91 0.989937C145.901 0.986052 145.9 0.983809 145.905 0.988304L146.586 0.255859L147.267 -0.476586C145.965 -1.68684 143.997 -0.673788 144.019 0.989303L145.019 0.976562ZM146.586 0.255859L145.905 0.988239C150.607 5.35937 152.731 10.2615 153.696 14.2351L154.668 13.999L155.64 13.763C154.603 9.49408 152.314 4.2155 147.267 -0.47652L146.586 0.255859ZM154.668 13.999V14.999H187V13.999V12.999H154.668V13.999ZM187 13.999V14.999C204.121 14.999 218 28.8784 218 45.999L219 45.999L220 45.999C220 27.7738 205.225 12.999 187 12.999V13.999ZM219 45.999H218C218 63.1199 204.121 76.999 187 76.999V77.999V78.999C205.225 78.999 220 64.2244 220 45.999H219ZM187 77.999V76.999H32V77.999V78.999H187V77.999ZM32 77.999V76.999C14.8792 76.999 1 63.1199 1 45.999H0H-1C-1 64.2244 13.7746 78.999 32 78.999V77.999ZM0 45.999L1 45.999C1.00021 28.8784 14.8793 14.999 32 14.999V13.999V12.999C13.7747 12.999 -0.999774 27.7738 -1 45.999L0 45.999ZM32 13.999V14.999H143.908V13.999V12.999H32V13.999ZM143.908 13.999L144.867 14.2837C146.14 9.99587 146.069 4.92122 146.018 0.992141L145.019 1.00488L144.019 1.01762C144.07 5.01556 144.121 9.77101 142.95 13.7143L143.908 13.999ZM145.019 1.00488H146.019V0.976562H145.019H144.019V1.00488H145.019Z"
                        fill="#B3CEF3"
                        mask="url(#speech-bubble-mask)"
                    />
                </Svg>
            </View>
            {/* 말풍선 내용 */}
            <View className="pt-[22px] pb-4 px-5" style={{ minHeight: 78 }}>
                {children}
            </View>
        </View>
    );
}
